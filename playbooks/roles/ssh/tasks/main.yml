- name: Create .ssh directory
  ansible.builtin.file:
    path: "/home/{{ ansible_user }}/.ssh"
    state: directory
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: "0700"

- name: "Set authorized keys from github for {{ ansible_user }}"
  ansible.posix.authorized_key:
    user: "{{ ansible_user }}"
    key: "https://github.com/{{ ssh_github_user }}.keys"
    state: present
    exclusive: true